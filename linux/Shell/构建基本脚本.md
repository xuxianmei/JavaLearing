# 主要内容

**使用多个命令**
**创建脚本文本**
**显示消息**
**使用变量**
**数学运算**
**退出脚本**

## 使用多个命令

在命令提示符使用多个命令：

````
command1;command2;command3;...
````

比如：

````
date;who;
````

## 创建脚本文件

将shell命令放到文本文件。

文本文件解释：
第一行：使用哪个shell来运行脚本。
```
#!/bin/bash 
``` 
其它行：
```
# 注释
其它为shell命令
```

## 显示消息

* 在echo命令后直接加上一个字符串

````
echo this is a test
````

* 使用单引号或双引号来划定文本字符串

如果在字符串中用到了它们，需要在文本中使用其中一种引号，而用另外一种来将字符串划定起来。

````
echo "That's good"
````

````
echo  'Rich says "shell is good"'
````

更多echo相关：man echo，比如-n：不在末尾输出一个新行。


## 使用变量


### 环境变量


shelll维护着一组环境变量，用来记录特定的系统信息。

在脚本中，有两种方式可以使用这些环境变量

````
$变量名
或
${变量名}
````

比如
````
echo $USER
echo ${UID}
````

### 用户变量（自定义变量）

shell脚本允许在脚本中定义和使用自己的变量。

* 赋值

````
变量名=值
````

比如：
````
var1=10;
var2=20;
````
变量名、等号、值之前不能出现任何空格。
shell脚本会自动决定变量值的数据类型。
在脚本的整个生命周期里，shell脚本中定义的变量会一直保持着它们的的值，
但在shell脚本结束时会被删除掉。

* 引用

与环境变量一样的引用方式：``$变量名``、``${变量名}``
变量每次被引用时，都会输出当前赋给它的值。

注：引用一个变量时，需要使用$符，而引用变量来对其进行赋值时，则不需要使用$符。
也就是，取值需要使用$，设置值不需要使用$。

### 命令替换

shell脚本中最有用的特性之一就是，可以从命令输出中提取信息，并将其赋值给变量。

命令替换允许命令的输出替换命令本身。

* 反引号字符(`)


````
`command`
````



* $()格式

````
$(command)
````


比如

````
today=$(date +%y%m%d)

ls /bin -al > $today.log

或者

ls /bin -al > $(date +%y%m%d).log
````

注：命令替换会创建一个子shell来运行对应的命令。
子shell是由运行该脚本的shell所创建出来的一个独立的子shell（故无法使用，此shell中的变量）。


## 数学运算


### 使用方括号


``$[数学运算]``

比如

````
var1=$[1+5]
var2=$[$var1*2]
echo var2
````

注：bash数学运算符只支持整数运算。（zsh提供了完整的浮点运算操作。）

### 浮点解决方案

bc


## 退出脚本

shell中运行的每个命令都使用退出状态码告诉shell它已经执行完毕。

退出状态码是一个0~255的整数值，在命令结束运行时由命令传给shell。

### 查看退出状态码

Linux提供一个专门的变量$?来保存上个已执行命令的退出状态码。

按照惯例，一个成功结束的命令的退出状态码是0。

shell脚本的退出状态码，默认是最后一个命令的退出状态码。

可以使用exit来改变

### exit

````
exit 退出状态码
注：只能是0~255，如果大于255，数值会对255取模运算。
````