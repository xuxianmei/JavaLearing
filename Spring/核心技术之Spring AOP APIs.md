# AOP

AOP（Aspect Oriented Programming），即面向切面编程，可以说是OOP（Object Oriented Programming，面向对象编程）的补充和完善。

OOP引入封装、继承、多态等概念来建立一种对象层次结构，用于模拟公共行为的一个集合。不过OOP允许开发者定义纵向的关系，但并不适合定义横向的关系，例如日志功能。

日志代码往往横向地散布在所有对象层次中，而与它对应的对象的核心功能毫无关系对于其他类型的代码，如安全性、异常处理和透明的持续性也都是如此，这种散布在各处的无关的代码被称为横切（cross cutting），在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。

AOP技术恰恰相反，它利用一种称为"横切"的技术，剖解开封装的对象内部，并将那些影响了多个类的公共行为封装到一个可重用模块，并将其命名为"Aspect"，即切面。

## AOP解决的问题
把这些横切关注点与业务逻辑相分离。


横切关注点（也可称为“次要关注点”）可以被模块化为特殊的类，这些类被称为切面(aspect)。
切面：简单说就是那些与业务无关，却为业务模块所共同调用的逻辑或责任封装起来，便于减少系统的重复代码，降低模块之间的耦合度，并有利于未来的可操作性和可维护性。


使用"横切"技术，AOP把软件系统分为两个部分：“核心关注点”和横切关注点（也可称为次要关注点）。
业务处理的主要流程是核心关注点，与之关系不大的部分是横切关注点。
横切关注点的一个特点是，他们经常发生在核心关注点的多处，而各处基本相似，比如权限认证、日志、事物。

## AOP的作用
在于分离系统中的各种关注点，将核心关注点和横切关注点分离开来。

## AOP核心概念及术语

* 横切关注点
跨多个应用对象的逻辑（非业务逻辑），比如安全，事务，日志，权限等
* 切面 
类是对物体特征的抽象，切面就是对横切关注点的抽象，切面实现了横切关注点的模块化。
也是通知和切点的结合。通知和切点定义了切面的全部内容--何时何处执行什么操作。
* 通知(Advice)
通知定义了切面是什么以及何时使用（何时，执行哪些代码）。
* 连接点(Join point)
连接点是在应用执行过程中能够插入切面的一个点。这个点可以是调用方法时，抛出异常时，修改字段时（在程序中也叫着被拦截的点）。切面代码可以利用这些点插入到应用的正常流程之中，并添加新的行为。
* 切点(Poincut)
如果说通知定义了切面的“什么”和“何时”的话，那么切点就定义了“何处”。
切点的定义会匹配通知所要织入的一个或多个连接点。  
我们通常使用明确的类和方法名称或是利用正则表达式定义所匹配的类和方法名称来指定这些切点。
* 织入(Weaving)
把切面应用到目标对象并创建新的代码对象的过程。切面在指定的连接点被织入到目标对象中。  
在目标对象的生命周期 时有多个点可以进行织入：
	* 编译期 
	* 类加载期
	* 运行期

* 引入(Introduction)
引入允许我们不修改原有类的情况下，向现有的类添加新方法和属性。



# Spring 中的AOP
下面是Spring如何来处理横切关注点的。
# Pointcut API in Spring（Spring中的切点API）

## 概念

Spring的切点模型使得切点可以独立于通知类型进行重用，这就使得针对不同的advice使用相同的pointcut成为可能。

org.springframework.aop.Pointcut是最核心的接口，这个接口用来将通知应用到特定的类和方法上。
```
public interface Pointcut {

	ClassFilter getClassFilter();

	MethodMatcher getMethodMatcher();
}
```




